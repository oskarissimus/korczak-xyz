<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" href="/favicon-32x32.png?v=3f375ebeb9d94fff277d7f3d685b24d9" type="image/png" />
  </head>
  <body>
    <div id="___gatsby">
      <div tabindex="-1" id="gatsby-focus-wrapper">
        <div>
          <div>
            <div>
              <div>
                <div>
                  <div><img alt="" /></div>
                  <img alt="logo" />
                </div>
                <a href="/">korczak.xyz</a>
              </div>
              <div></div>
              <label
                ><input type="checkbox" checked="" />
                <div></div>
                <span>Dark mode</span></label
              ><button aria-label="Menu">
                <svg
                  aria-hidden="true"
                  focusable="false"
                  role="img"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 512 512"
                >
                  <path
                    fill="currentColor"
                    d="M61.1 224C45 224 32 211 32 194.9c0-1.9 .2-3.7 .6-5.6C37.9 168.3 78.8 32 256 32s218.1 136.3 223.4 157.3c.5 1.9 .6 3.7 .6 5.6c0 16.1-13 29.1-29.1 29.1L61.1 224zM144 128a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm240 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32zM272 96a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zM16 304c0-26.5 21.5-48 48-48l384 0c26.5 0 48 21.5 48 48s-21.5 48-48 48L64 352c-26.5 0-48-21.5-48-48zm16 96c0-8.8 7.2-16 16-16l416 0c8.8 0 16 7.2 16 16l0 16c0 35.3-28.7 64-64 64L96 480c-35.3 0-64-28.7-64-64l0-16z"
                  ></path>
                </svg>
              </button>
            </div>
            <nav>
              <div>
                <div>
                  <div><img alt="" /></div>
                  <img alt="logo" />
                </div>
                <a href="/">korczak.xyz</a>
              </div>
              <div></div>
              <a href="/pl/">Główna</a><a href="/pl/about/">O mnie</a><a href="/pl/mentoring/">Mentoring</a
              ><a href="/pl/courses/">Kursy</a><a href="/pl/blog/">Blog</a><a href="/pl/songs/">Teksty</a
              ><label
                ><input type="checkbox" checked="" />
                <div></div>
                <span>Dark mode</span></label
              >
              <div>
                <a hreflang="en" href="/blog/hacked-intercom/"><img alt="" /></a
                ><a aria-current="page" hreflang="pl" href="/pl/blog/hacked-intercom/"><img alt="" /></a>
              </div>
            </nav>
          </div>
          <div>
            <div>
              <div>
                <header><h1>Domofon zhakowany</h1></header>
                <main>
                  <section itemprop="articleBody">
                    <span
                      ><figure>
                        <span>
                          <a
                            href="/static/023312a1eb07e6f056ffc5a45c1554f9/98b29/finished-internals.png"
                            target="_blank"
                            rel="noopener"
                          >
                            <span></span>
                            <img alt="wnętrzności" />
                          </a>
                        </span>
                        <figcaption>wnętrzności</figcaption>
                      </figure></span
                    >
                    <p>
                      W 2018 waletowałem u kolegi. Dorobiłem klucze do mieszkania, ale nie dało się dorobić klucza do
                      klatki schodowej ponieważ oryginał był zgięty. Ślusarz powiedział że nie da się takiego klucza
                      skopiować. Oryginał normalnie otwierał drzwi do klatki. Pytałem czy da się taki klucz wyprostować
                      ale powiedział że prawie napewno się od tego złamie. Nie za bardzo dało się poprosić landlorda o
                      dodatkowy klucz dla mnie, bo w końcu nie wiedział że tam mieszkam.
                    </p>
                    <h2>Domofon dobrze działał</h2>
                    <p><span></span></p>
                    <figure>
                      <span>
                        <a
                          href="/static/d3fe363e19e306e70f4b6d8c8d8e754e/60a1a/external.png"
                          target="_blank"
                          rel="noopener"
                        >
                          <span></span>
                          <img alt="zwykły domofon" />
                        </a>
                      </span>
                      <figcaption>zwykły domofon</figcaption>
                    </figure>
                    Domofon był normalny jak w starej kamienicy niedaleko Olsztyńskiej starówki. Każde mieszkanie miało
                    swój przycisk, bez żadnych kodów itp. Funkcjonalności domofonu
                    <p></p>
                    <ol>
                      <li>dzwonienie do wybranego mieszkania</li>
                      <li>odbieranie połączenia</li>
                      <li>rozmowa</li>
                      <li>
                        otwieranie drzwi Miałem zamiar podłączyć arduino do punktów 1. oraz 4. Jak się później okazało
                        całkiem zabawne było później połączenie się z punktem 3.
                      </li>
                    </ol>
                    <h2>Arduino</h2>
                    <p><span></span></p>
                    <figure>
                      <span>
                        <a
                          href="/static/9dad6e9ed7b8fd5a8c734ab7a82b9b87/212bf/loose-internals.jpg"
                          target="_blank"
                          rel="noopener"
                        >
                          <span></span>
                          <img alt="lużne wnętrzności" />
                        </a>
                      </span>
                      <figcaption>lużne wnętrzności</figcaption>
                    </figure>
                    Kupiłem od chińczyka kilka sztuk po dwa dolary. Wykorzystałem multimetr i dokumentację domofonu
                    znalezioną w internecie aby rozkminić do których pinów połączyć ADC z Arduino. Następnie
                    Implementacja była już dość prosta. upierdliwe było jedynie wgrywanie kodu na arduino jak to zwykle
                    przy takich projektach, gdzie nie można zbyt szybko iterować. Chyba że ma się piekielnie długie
                    kable lub jakieś sprytne wgrywanie kodu przez wifi itp. ja nie miałem
                    <p></p>
                    <iframe
                      width="560"
                      height="315"
                      src="https://www.youtube.com/embed/6tuDXU8ow9M"
                      title="YouTube video player"
                      frameborder="0"
                      allow="
                        accelerometer;
                        autoplay;
                        clipboard-write;
                        encrypted-media;
                        gyroscope;
                        picture-in-picture;
                        web-share;
                      "
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen=""
                    ></iframe>
                    <h2>Algorytm</h2>
                    <p>
                      Należało zadzwonic 4 razy (w określonych odstępach czasowych) do mojego mieszkania aby puścić
                      napięcie na obwód z przekaźnikiem który był w miejscu gdzie normalnie otwiera się furtkę. Musiałem
                      dać szerokie widełki czasowe aby dało się z tego korzystać i pewien czas po którym się to
                      resetowało.
                    </p>
                    <iframe
                      width="560"
                      height="315"
                      src="https://www.youtube.com/embed/KKOZTo64eQk"
                      title="YouTube video player"
                      frameborder="0"
                      allow="
                        accelerometer;
                        autoplay;
                        clipboard-write;
                        encrypted-media;
                        gyroscope;
                        picture-in-picture;
                        web-share;
                      "
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen=""
                    ></iframe>
                    <h2>Wifi</h2>
                    <p>
                      W 2018 każdy już miał smartfona więc można się zastanawiać czemu tego nie użyłem w moim projekcie
                      aby po prostu zdalnie otwierać furtkę jak już byłem podłączony do linii domofonu? Któtko mówiąc
                      było to bardzo niestabilne - nie chciałem na tym polegać - przypomnę że była to moja jedyna opcja
                      wejścia na klatkę jak nie było kumpla w domu. I zdarzyło się parę razy że miałem to już
                      skonfigurowane na wifi na ESP32, i nie wiadomo czemu coś się zawiesiło i przestało działać
                    </p>
                    <h2>Dźwięki</h2>
                    <iframe
                      width="560"
                      height="315"
                      src="https://www.youtube.com/embed/lfNpqSJsEVw"
                      title="YouTube video player"
                      frameborder="0"
                      allow="
                        accelerometer;
                        autoplay;
                        clipboard-write;
                        encrypted-media;
                        gyroscope;
                        picture-in-picture;
                        web-share;
                      "
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen=""
                    ></iframe>
                    <p>
                      Jak już miałem działającą rzecz, dalej się zastanawiałm co można ulepszyć. I okazało się że dość
                      łatwo można podłaczyć się do linii gdzie jest przekazywany dźwięk rozmowy domofonu - sygnał
                      analogowy. Podłączyłem odtwarzacz mp3 od chińczyka który był malutką płytką drukowaną wielkości
                      karty micro-sd. Była tam oczywiście również karta na którą wgrałem śmieszne dźwięki które były
                      odtwarzane po tym jak wprowadziło się prawidłowy kod - cztery dzwonki w równych odstępach.
                    </p>
                  </section>
                </main>
              </div>
            </div>
            <footer><a href="/">korczak.xyz</a></footer>
          </div>
        </div>
      </div>
      <div id="gatsby-announcer" aria-live="assertive" aria-atomic="true"></div>
    </div>
  </body>
</html>
