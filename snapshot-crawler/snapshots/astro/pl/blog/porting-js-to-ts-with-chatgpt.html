<html lang="pl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Personal website of Oskar Korczak" />
    <meta name="image" content="https://korczak.xyz/logo.png" />
    <link rel="icon" href="/favicon-32x32.png" type="image/png" />
    <title>Portowanie JS do TS z u偶yciem ChatGPT | korczak.xyz</title>
  </head>
  <body>
    <div>
      <div>
        <div>
          <div><img alt="logo" /> <a href="/pl/">korczak.xyz</a></div>
          <div></div>
          <astro-island
            uid="Z1QhqvY"
            prefix="r2"
            component-url="/_astro/DarkModeSwitch.BQNEYJL_.js"
            component-export="default"
            renderer-url="/_astro/client.9unXo8s5.js"
            props='{"className":[0,"block md:hidden"]}'
            client="load"
            opts='{"name":"DarkModeSwitch","value":true}'
            await-children=""
            ><label
              ><input type="checkbox" />
              <div></div>
              <span>Dark mode</span></label
            ></astro-island
          >
          <button aria-label="Menu" id="menu-button">
            <svg fill="currentColor" viewBox="0 0 448 512">
              <path
                d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"
              ></path>
            </svg>
          </button>
        </div>
        <nav id="main-nav">
          <div><img alt="logo" /> <a href="/pl/">korczak.xyz</a></div>
          <div></div>
          <a href="/pl/">G贸wna</a><a href="/pl/about/">O mnie</a><a href="/pl/mentoring/">Mentoring</a
          ><a href="/pl/courses/">Kursy</a><a href="/pl/blog/">Blog</a><a href="/pl/songs/">Teksty</a>
          <astro-island
            uid="18Ow2c"
            prefix="r3"
            component-url="/_astro/DarkModeSwitch.BQNEYJL_.js"
            component-export="default"
            renderer-url="/_astro/client.9unXo8s5.js"
            props='{"className":[0,"hidden md:block"]}'
            client="load"
            opts='{"name":"DarkModeSwitch","value":true}'
            await-children=""
            ><label
              ><input type="checkbox" checked="" />
              <div></div>
              <span>Dark mode</span></label
            ></astro-island
          >
          <div>
            <a href="/blog/porting-js-to-ts-with-chatgpt/"> <span role="img" aria-label="en"></span> </a>
            <a href="/pl/blog/porting-js-to-ts-with-chatgpt/"> <span role="img" aria-label="pl">叼</span> </a>
          </div>
        </nav>
      </div>
      <div>
        <div>
          <div>
            <header><h1>Portowanie JS do TS z u偶yciem ChatGPT</h1></header>
            <main>
              <section itemprop="articleBody">
                <iframe
                  width="560"
                  height="315"
                  src="https://www.youtube.com/embed/7ih7E_Viesg"
                  title="YouTube video player"
                  frameborder="0"
                  allow="
                    accelerometer;
                    autoplay;
                    clipboard-write;
                    encrypted-media;
                    gyroscope;
                    picture-in-picture;
                    web-share;
                  "
                  referrerpolicy="strict-origin-when-cross-origin"
                  allowfullscreen=""
                ></iframe>
                <h2 id="wstp">Wstp</h2>
                <p>
                  Kolega mi opowiada, 偶e pracowa raz przy projekcie, kt贸rego celem byo portowanie kodu z Pythona 2 do
                  3. To by projekt dla caego teamu na kilka kwarta贸w. Ludzie si na tym wypalali. Tak si skada, 偶e
                  to by projekt open-source, kt贸ry dodatkowo nie by zbyt dobrze pokryty testami. Nic przyjemnego.
                </p>
                <h2 id="strona-osobista">Strona osobista</h2>
                <p>
                  Ja zrobiem swoj stron osobist pocztkowo w WordPress, p贸藕niej przepisaem j w Gatsby w JS. No i
                  stawa si coraz popularniejszy ChatGPT, wic uznaem, 偶e mo偶na spr贸bowa przeportowa to na TS. Dodam
                  tylko, 偶e nie znaem za bardzo TS. Nie jest to rocket science, ale nie napisaem do tamtej pory
                  偶adnego kodu w TS. Mo偶na powiedzie, 偶e ChatGPT nie tylko przeportowa mi codebase, ale r贸wnie偶
                  nauczy TS i zrobi coverage.
                </p>
                <h2 id="pierwsze-pr贸by">Pierwsze pr贸by</h2>
                <p>
                  Pierwsze pr贸by wyglday do obiecujco, poniewa偶 JS i TS s w gruncie rzeczy do podobne.
                  Przeportowanie pojedynczego pliku zazwyczaj nie byo problemem dla ChatGPT. Postanowiem wic p贸j
                  dalej i zautomatyzowa portowanie.
                </p>
                <h2 id="porter">Porter</h2>
                <p>
                  Porter - tak nazywa si moja pr贸ba napisania automatu do portowania caego repozytorium z jzyka
                  programowania X na jzyk programowania Y. Kod 藕r贸dowy jest dostpny na GitHub, jednak nie jest to
                  dziaajca rzecz. Teoretycznie zadanie wydawao si proste.
                </p>
                <p><img alt="dont crash into each other" /></p>
                <h3 id="pierwsze-podejcie">Pierwsze podejcie</h3>
                <pre
                  tabindex="0"
                ><code><span><span>for file </span><span>in</span><span> files</span><span>:</span></span>
<span><span>    ported </span><span>=</span><span> prompt_gpt_to_port_file</span><span>(file)</span></span>
<span><span>    file</span><span>.write</span><span>(ported)</span></span></code></pre>
                <h3 id="sprawd藕my-czy-kod-dziaa">Sprawd藕my czy kod dziaa</h3>
                <pre
                  tabindex="0"
                ><code><span><span>for file </span><span>in</span><span> files</span><span>:</span></span>
<span><span>    ported </span><span>=</span><span> prompt_gpt_to_port_file</span><span>(file)</span></span>
<span></span>
<span><span>    test_errors </span><span>=</span><span> test</span><span>(ported)</span></span>
<span><span>    if</span><span> test_errors</span><span>:</span></span>
<span><span>        prompt_gpt_to_fix_errors</span><span>(ported</span><span>,</span><span> test_errors)</span></span>
<span></span>
<span><span>    file</span><span>.write</span><span>(ported)</span></span></code></pre>
                <h3 id="sprawd藕my-czy-kod-si-kompiluje">Sprawd藕my czy kod si kompiluje</h3>
                <pre
                  tabindex="0"
                ><code><span><span>for file </span><span>in</span><span> files</span><span>:</span></span>
<span><span>    ported </span><span>=</span><span> prompt_gpt_to_port_file</span><span>(file)</span></span>
<span></span>
<span><span>    compilation_errors </span><span>=</span><span> compile</span><span>(ported)</span></span>
<span><span>    if</span><span> compilation_errors</span><span>:</span></span>
<span><span>        prompt_gpt_to_fix_errors</span><span>(ported</span><span>,</span><span> compilation_errors)</span></span>
<span></span>
<span><span>    test_errors </span><span>=</span><span> test</span><span>(ported)</span></span>
<span><span>    if</span><span> test_errors</span><span>:</span></span>
<span><span>        prompt_gpt_to_fix_errors</span><span>(ported</span><span>,</span><span> test_errors)</span></span>
<span></span>
<span><span>    file</span><span>.write</span><span>(ported)</span></span></code></pre>
                <h3 id="czasami-jedna-runda-poprawek-nie-wystarcza">Czasami jedna runda poprawek nie wystarcza</h3>
                <pre
                  tabindex="0"
                ><code><span><span>for file </span><span>in</span><span> files</span><span>:</span></span>
<span><span>    ported </span><span>=</span><span> prompt_gpt_to_port_file</span><span>(file)</span></span>
<span></span>
<span><span>    compilation_errors </span><span>=</span><span> compile</span><span>(ported)</span></span>
<span><span>    while</span><span> compilation_errors</span><span>:</span></span>
<span><span>        prompt_gpt_to_fix_errors</span><span>(ported</span><span>,</span><span> compilation_errors)</span></span>
<span></span>
<span><span>    test_errors </span><span>=</span><span> test</span><span>(ported)</span></span>
<span><span>    while</span><span> test_errors</span><span>:</span></span>
<span><span>        prompt_gpt_to_fix_errors</span><span>(ported</span><span>,</span><span> test_errors)</span></span>
<span></span>
<span><span>    file</span><span>.write</span><span>(ported)</span></span></code></pre>
                <h2 id="refleksja">Refleksja</h2>
                <p>
                  Wydaje si, 偶e dodalimy sporo logiki specyficznej dla danego problemu - nie jest to og贸lne
                  rozwizanie portowania z jzyka X na Y. Jestem sobie w stanie wyobrazi, 偶e w wielu przypadkach nie
                  jest to tak proste, 偶e mo偶na portowa po prostu pliki po kolei. Czasami trzeba stworzy wicej plik贸w,
                  wprowadzi zmiany w jakich innych itp. Jednak wydaje si, 偶e ChatGPT powinien to wiedzie. W kocu
                  mo偶emy zapyta go, w jaki spos贸b przeportowa codebase z jzyka X na Y i bez problemu odpowie i uo偶y
                  plan dziaania.
                </p>
                <h2 id="babyagi-autogpt">BabyAGI, AutoGPT</h2>
                <p>
                  Te projekty s bardzo ambitne i chodzi o to, 偶eby GPT sam si promptowa w ptli i w ten spos贸b
                  rozwizywa zo偶one problemy uwzgldniajc planowanie i wykonywanie dziaa. Kiedy zaczem z nich
                  korzysta, okazao si, 偶e nie jest to takie proste i diabe tkwi w szczeg贸ach:
                </p>
                <ol>
                  <li>
                    Jest drogo - GPT3.5 co prawda nie jest super drogie per request, ale kontekst jest zbyt kr贸tki i nie
                    ogarnia tak dobrze, jak GPT4. A odpalenie jednego eksperymentu z GPT4 kosztowao kilka dolar贸w, wic
                    jak sobie to szybko policzyem, to na takie eksperymenty mnie nie sta, szczeg贸lnie biorc pod
                    uwag, 偶e nie wiadomo czy na koniec to bdzie dziaa. szczeg贸lnie biorc pod uwag 偶e nie wiadomo
                    czy na koniec to bdzie dziaa
                  </li>
                  <li>
                    Dugo to trwa - GPT3.5 jest szybkie, ale nie ogarnia, a GPT4 jest sporo wolniejsze, wic ka偶dy test
                    sporo trwa.
                  </li>
                  <li>Dobre promptowanie jest trudne.</li>
                  <li>Nie miaem dostpu do API GPT-4, wic korzystaem z API kolegi, ale to te偶 ma swoje wady.</li>
                </ol>
                <h2 id="langchain">Langchain</h2>
                <p>W tym projekcie chodzi o to, 偶eby zdefiniowa narzdzia dla GPT, takie jak np:</p>
                <ul>
                  <li>walidacja kodu <code>tsc --noEmit</code></li>
                  <li>testowanie kodu <code>npm run test</code></li>
                  <li>klonowanie repozytorium <code>git clone ...</code></li>
                </ul>
                <p>W ten spos贸b uatwiamy zadanie, 偶eby GPT nie musia wszystkiego kmini od zera.</p>
                <p>
                  By may sukces. Wydaje mi si, 偶e z u偶yciem kt贸rego z tych narzdzi udao mi si sprawi, 偶e po
                  wpisaniu komendy w stylu:
                </p>
                <pre tabindex="0"><code><span><span>python porter.py &lt;link do repo&gt;</span></span></code></pre>
                <p>Skrypt przeportowa jeden plik, zrobi commit i otworzy pull-requesta.</p>
                <h2 id="ostateczne-rozwiazanie">Ostateczne rozwiazanie</h2>
                <p>
                  Po kilku nieprzespanych nocach, wzlotach i upadkach, uznaem, 偶e problem jest za du偶y na moj gow,
                  albo 偶e narzdzia nie s jeszcze wystarczajco mocne, 偶eby dao si napisa portera. Postanowiem, 偶e
                  wiksz warto bdzie miao dla mnie wykonanie zadania ni偶 tworzenie narzdzia, kt贸re nie wiadomo czy
                  da si stworzy. Dlatego postawiem na stary sprawdzony wzorzec projektowy kopiego-pasta. Czyli plik
                  po pliku kopiowaem do ChatuGPT, nastpnie wklejaem do IDE, odpalaem testy, kompilator i feedowaem
                  spowrotem do ChatuGPT jeli byy bdy.
                </p>
                <h2 id="nowe-funkcjonalnoci">Nowe funkcjonalnoci</h2>
                <p>
                  Miesic temu do ChatuGPT zosta dodany Code Interpreter. Fajn rzecz jest to, 偶e mo偶na mu wrzuci zip
                  z kodem i on umie sobie po nim chodzi i czyta pliki itp. Uatwio to spraw.
                </p>
                <h2 id="podsumowanie">Podsumowanie</h2>
                <p>
                  Bez ChatuGPT nadal nie umiabym TS, a tak偶e bym mia o wiele sabszy codebase. Pena automatyzacja
                  takich zo偶onych zada wydaje si, 偶e jest jeszcze poza zasigiem, ale w tej bran偶y sprawy id tak
                  szybko, 偶e mo偶e ju偶 kto to zrobi :p
                </p>
                <h2 id="uznanie-autorstwa">Uznanie autorstwa</h2>
                <p>
                  Photo by
                  <a
                    href="https://unsplash.com/@esmonde?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText"
                    >Esmonde Yong</a
                  >
                  on
                  <a
                    href="https://unsplash.com/photos/wFpJV5EWrSM?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText"
                    >Unsplash</a
                  >
                </p>
              </section>
            </main>
          </div>
        </div>
        <footer><a href="/pl/">korczak.xyz</a></footer>
      </div>
    </div>
  </body>
</html>
