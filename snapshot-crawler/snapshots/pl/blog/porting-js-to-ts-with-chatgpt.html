<html><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Gatsby 5.14.1"><link rel="icon" href="/favicon-32x32.png?v=3f375ebeb9d94fff277d7f3d685b24d9" type="image/png"><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=3f375ebeb9d94fff277d7f3d685b24d9"><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=3f375ebeb9d94fff277d7f3d685b24d9"><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=3f375ebeb9d94fff277d7f3d685b24d9"><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=3f375ebeb9d94fff277d7f3d685b24d9"><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=3f375ebeb9d94fff277d7f3d685b24d9"><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=3f375ebeb9d94fff277d7f3d685b24d9"><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=3f375ebeb9d94fff277d7f3d685b24d9"><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=3f375ebeb9d94fff277d7f3d685b24d9"><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript></head><body><div id="___gatsby"><div tabindex="-1" id="gatsby-focus-wrapper" style="outline: none;"><div><div><div><div><div><div style="max-width:30px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height='30'%20width='30'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"></div><div aria-hidden="true" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0;object-fit:cover"></div><picture><source type="image/webp" srcset="/static/3f375ebeb9d94fff277d7f3d685b24d9/5d252/logo.webp 8w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/f57b3/logo.webp 15w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/bde72/logo.webp 30w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/927d1/logo.webp 60w" sizes="(min-width: 30px) 30px, 100vw"><img width="30" height="30" style="object-fit:cover;opacity:0" sizes="(min-width: 30px) 30px, 100vw" decoding="async" loading="lazy" src="/static/3f375ebeb9d94fff277d7f3d685b24d9/53973/logo.png" srcset="/static/3f375ebeb9d94fff277d7f3d685b24d9/22867/logo.png 8w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/7961d/logo.png 15w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/53973/logo.png 30w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/7ab40/logo.png 60w" alt="logo"></picture><noscript><picture><source type="image/webp" srcSet="/static/3f375ebeb9d94fff277d7f3d685b24d9/5d252/logo.webp 8w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/f57b3/logo.webp 15w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/bde72/logo.webp 30w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/927d1/logo.webp 60w" sizes="(min-width: 30px) 30px, 100vw"/><img width="30" height="30" data-main-image="" style="object-fit:cover;opacity:0" sizes="(min-width: 30px) 30px, 100vw" decoding="async" loading="lazy" src="/static/3f375ebeb9d94fff277d7f3d685b24d9/53973/logo.png" srcSet="/static/3f375ebeb9d94fff277d7f3d685b24d9/22867/logo.png 8w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/7961d/logo.png 15w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/53973/logo.png 30w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/7ab40/logo.png 60w" alt="logo"/></picture></noscript></div><a href="/">korczak.xyz</a></div><div></div><label><input type="checkbox"><div></div><span>Dark mode</span></label><button aria-label="Menu"><svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M61.1 224C45 224 32 211 32 194.9c0-1.9 .2-3.7 .6-5.6C37.9 168.3 78.8 32 256 32s218.1 136.3 223.4 157.3c.5 1.9 .6 3.7 .6 5.6c0 16.1-13 29.1-29.1 29.1L61.1 224zM144 128a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm240 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32zM272 96a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zM16 304c0-26.5 21.5-48 48-48l384 0c26.5 0 48 21.5 48 48s-21.5 48-48 48L64 352c-26.5 0-48-21.5-48-48zm16 96c0-8.8 7.2-16 16-16l416 0c8.8 0 16 7.2 16 16l0 16c0 35.3-28.7 64-64 64L96 480c-35.3 0-64-28.7-64-64l0-16z"></path></svg></button></div><nav><div><div><div style="max-width:30px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height='30'%20width='30'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"></div><div aria-hidden="true" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0;object-fit:cover"></div><picture><source type="image/webp" srcset="/static/3f375ebeb9d94fff277d7f3d685b24d9/5d252/logo.webp 8w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/f57b3/logo.webp 15w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/bde72/logo.webp 30w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/927d1/logo.webp 60w" sizes="(min-width: 30px) 30px, 100vw"><img width="30" height="30" style="object-fit:cover;opacity:0" sizes="(min-width: 30px) 30px, 100vw" decoding="async" loading="lazy" src="/static/3f375ebeb9d94fff277d7f3d685b24d9/53973/logo.png" srcset="/static/3f375ebeb9d94fff277d7f3d685b24d9/22867/logo.png 8w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/7961d/logo.png 15w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/53973/logo.png 30w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/7ab40/logo.png 60w" alt="logo"></picture><noscript><picture><source type="image/webp" srcSet="/static/3f375ebeb9d94fff277d7f3d685b24d9/5d252/logo.webp 8w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/f57b3/logo.webp 15w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/bde72/logo.webp 30w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/927d1/logo.webp 60w" sizes="(min-width: 30px) 30px, 100vw"/><img width="30" height="30" data-main-image="" style="object-fit:cover;opacity:0" sizes="(min-width: 30px) 30px, 100vw" decoding="async" loading="lazy" src="/static/3f375ebeb9d94fff277d7f3d685b24d9/53973/logo.png" srcSet="/static/3f375ebeb9d94fff277d7f3d685b24d9/22867/logo.png 8w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/7961d/logo.png 15w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/53973/logo.png 30w,
/static/3f375ebeb9d94fff277d7f3d685b24d9/7ab40/logo.png 60w" alt="logo"/></picture></noscript></div><a href="/">korczak.xyz</a></div><div></div><a href="/pl/">G贸wna</a><a href="/pl/about/">O mnie</a><a href="/pl/mentoring/">Mentoring</a><a href="/pl/courses/">Kursy</a><a href="/pl/blog/">Blog</a><a href="/pl/songs/">Teksty</a><label><input type="checkbox"><div></div><span>Dark mode</span></label><div><a hreflang="en" href="/blog/porting-js-to-ts-with-chatgpt/"><span role="img" aria-label="en"></span></a><a aria-current="page" hreflang="pl" href="/pl/blog/porting-js-to-ts-with-chatgpt/"><span role="img" aria-label="pl">叼</span></a></div></nav></div><div><div><div><header><h1>Portowanie JS do TS z u偶yciem ChatGPT</h1></header><main><section itemprop="articleBody"><iframe width="560" height="315" src="https://www.youtube.com/embed/7ih7E_Viesg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
<h2>Wstp</h2>
<p>Kolega mi opowiada, 偶e pracowa raz przy projekcie, kt贸rego celem byo portowanie kodu z Pythona 2 do 3. To by projekt dla caego teamu na kilka kwarta贸w. Ludzie si na tym wypalali. Tak si skada, 偶e to by projekt open-source, kt贸ry dodatkowo nie by zbyt dobrze pokryty testami. Nic przyjemnego.</p>
<h2>Strona osobista</h2>
<p>Ja zrobiem swoj stron osobist pocztkowo w WordPress, p贸藕niej przepisaem j w Gatsby w JS. No i stawa si coraz popularniejszy ChatGPT, wic uznaem, 偶e mo偶na spr贸bowa przeportowa to na TS. Dodam tylko, 偶e nie znaem za bardzo TS. Nie jest to rocket science, ale nie napisaem do tamtej pory 偶adnego kodu w TS. Mo偶na powiedzie, 偶e ChatGPT nie tylko przeportowa mi codebase, ale r贸wnie偶 nauczy TS i zrobi coverage.</p>
<h2>Pierwsze pr贸by</h2>
<p>Pierwsze pr贸by wyglday do obiecujco, poniewa偶 JS i TS s w gruncie rzeczy do podobne. Przeportowanie pojedynczego pliku zazwyczaj nie byo problemem dla ChatGPT. Postanowiem wic p贸j dalej i zautomatyzowa portowanie.</p>
<h2>Porter</h2>
<p>Porter - tak nazywa si moja pr贸ba napisania automatu do portowania caego repozytorium z jzyka programowania X na jzyk programowania Y. Kod 藕r贸dowy jest dostpny na GitHub, jednak nie jest to dziaajca rzecz. Teoretycznie zadanie wydawao si proste.</p>
<span><figure style="">
    <span style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; ">
      <a href="/static/a9607d38d6441d5eba4516868c7ad536/c08c5/dont-crash-into-each-other.jpg" style="display: block" target="_blank" rel="noopener">
    <span style="padding-bottom: 94.7917%; position: relative; bottom: 0px; left: 0px; background-image: url(&quot;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAQADAAAAAAAAAAAAAAAAAAUBAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAeLNhqRFkUdzNA//xAAaEAACAwEBAAAAAAAAAAAAAAAAAQIUMRAR/9oACAEBAAEFAkheI0qRKkSnEW8//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAGBEAAgMAAAAAAAAAAAAAAAAAABEBAhD/2gAIAQIBAT8BiyHv/8QAGhAAAgIDAAAAAAAAAAAAAAAAADIBAiAhMf/aAAgBAQAGPwI2cGkaRrYf/8QAHBAAAwACAwEAAAAAAAAAAAAAAAERIfEQYZHR/9oACAEBAAE/IXZs8Fo1XSSHnYNOa1E/khMiLj//2gAMAwEAAgADAAAAEIwQPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABcRAAMBAAAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QQM3/xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMVFxEP/aAAgBAQABPxDOvArVhy5CA1Hl1UKKw+YqygQBByANi76wJsu/X5//2Q==&quot;); background-size: cover; display: block; opacity: 0;"></span>
  <img alt="dont crash into each other" title="dont crash into each other" src="/static/a9607d38d6441d5eba4516868c7ad536/c08c5/dont-crash-into-each-other.jpg" srcset="/static/a9607d38d6441d5eba4516868c7ad536/7809d/dont-crash-into-each-other.jpg 192w,
/static/a9607d38d6441d5eba4516868c7ad536/4ecad/dont-crash-into-each-other.jpg 384w,
/static/a9607d38d6441d5eba4516868c7ad536/c08c5/dont-crash-into-each-other.jpg 640w" sizes="(max-width: 640px) 100vw, 640px" style="width: 100%; height: 100%; margin: 0px; vertical-align: middle; position: absolute; top: 0px; left: 0px; opacity: 1; color: inherit; box-shadow: white 0px 0px 0px 400px inset;" loading="lazy" decoding="async">
  </a>
    </span>
    <figcaption>dont crash into each other</figcaption>
  </figure></span>
<h3>Pierwsze podejcie</h3>
<span><div><pre><code><span>for</span> file <span>in</span> <span>files</span><span>:</span>
    ported <span>=</span> <span>prompt_gpt_to_port_file</span><span>(</span>file<span>)</span>
    file<span>.</span><span>write</span><span>(</span>ported<span>)</span></code></pre></div></span>
<h3>Sprawd藕my czy kod dziaa</h3>
<span><div><pre><code><span>for</span> file <span>in</span> <span>files</span><span>:</span>
    ported <span>=</span> <span>prompt_gpt_to_port_file</span><span>(</span>file<span>)</span>

    test_errors <span>=</span> <span>test</span><span>(</span>ported<span>)</span>
    <span>if</span> <span>test_errors</span><span>:</span>
        <span>prompt_gpt_to_fix_errors</span><span>(</span>ported<span>,</span> test_errors<span>)</span>

    file<span>.</span><span>write</span><span>(</span>ported<span>)</span></code></pre></div></span>
<h3>Sprawd藕my czy kod si kompiluje</h3>
<span><div><pre><code><span>for</span> file <span>in</span> <span>files</span><span>:</span>
    ported <span>=</span> <span>prompt_gpt_to_port_file</span><span>(</span>file<span>)</span>

    compilation_errors <span>=</span> <span>compile</span><span>(</span>ported<span>)</span>
    <span>if</span> <span>compilation_errors</span><span>:</span>
        <span>prompt_gpt_to_fix_errors</span><span>(</span>ported<span>,</span> compilation_errors<span>)</span>

    test_errors <span>=</span> <span>test</span><span>(</span>ported<span>)</span>
    <span>if</span> <span>test_errors</span><span>:</span>
        <span>prompt_gpt_to_fix_errors</span><span>(</span>ported<span>,</span> test_errors<span>)</span>

    file<span>.</span><span>write</span><span>(</span>ported<span>)</span></code></pre></div></span>
<h3>Czasami jedna runda poprawek nie wystarcza</h3>
<span><div><pre><code><span>for</span> file <span>in</span> <span>files</span><span>:</span>
    ported <span>=</span> <span>prompt_gpt_to_port_file</span><span>(</span>file<span>)</span>

    compilation_errors <span>=</span> <span>compile</span><span>(</span>ported<span>)</span>
    <span>while</span> <span>compilation_errors</span><span>:</span>
        <span>prompt_gpt_to_fix_errors</span><span>(</span>ported<span>,</span> compilation_errors<span>)</span>

    test_errors <span>=</span> <span>test</span><span>(</span>ported<span>)</span>
    <span>while</span> <span>test_errors</span><span>:</span>
        <span>prompt_gpt_to_fix_errors</span><span>(</span>ported<span>,</span> test_errors<span>)</span>

    file<span>.</span><span>write</span><span>(</span>ported<span>)</span></code></pre></div></span>
<h2>Refleksja</h2>
<p>Wydaje si, 偶e dodalimy sporo logiki specyficznej dla danego problemu - nie jest to og贸lne rozwizanie portowania z jzyka X na Y. Jestem sobie w stanie wyobrazi, 偶e w wielu przypadkach nie jest to tak proste, 偶e mo偶na portowa po prostu pliki po kolei. Czasami trzeba stworzy wicej plik贸w, wprowadzi zmiany w jakich innych itp. Jednak wydaje si, 偶e ChatGPT powinien to wiedzie. W kocu mo偶emy zapyta go, w jaki spos贸b przeportowa codebase z jzyka X na Y i bez problemu odpowie i uo偶y plan dziaania.</p>
<h2>BabyAGI, AutoGPT</h2>
<p>Te projekty s bardzo ambitne i chodzi o to, 偶eby GPT sam si promptowa w ptli i w ten spos贸b rozwizywa zo偶one problemy uwzgldniajc planowanie i wykonywanie dziaa. Kiedy zaczem z nich korzysta, okazao si, 偶e nie jest to takie proste i diabe tkwi w szczeg贸ach:</p>
<ol>
<li>Jest drogo - GPT3.5 co prawda nie jest super drogie per request, ale kontekst jest zbyt kr贸tki i nie ogarnia tak dobrze, jak GPT4. A odpalenie jednego eksperymentu z GPT4 kosztowao kilka dolar贸w, wic jak sobie to szybko policzyem, to na takie eksperymenty mnie nie sta, szczeg贸lnie biorc pod uwag, 偶e nie wiadomo czy na koniec to bdzie dziaa. szczeg贸lnie biorc pod uwag 偶e nie wiadomo czy na koniec to bdzie dziaa</li>
<li>Dugo to trwa - GPT3.5 jest szybkie, ale nie ogarnia, a GPT4 jest sporo wolniejsze, wic ka偶dy test sporo trwa.</li>
<li>Dobre promptowanie jest trudne.</li>
<li>Nie miaem dostpu do API GPT-4, wic korzystaem z API kolegi, ale to te偶 ma swoje wady.</li>
</ol>
<h2>Langchain</h2>
<p>W tym projekcie chodzi o to, 偶eby zdefiniowa narzdzia dla GPT, takie jak np:</p>
<ul>
<li>walidacja kodu <span><code>tsc --noEmit</code></span></li>
<li>testowanie kodu <span><code>npm run test</code></span></li>
<li>klonowanie repozytorium <span><code>git clone ...</code></span></li>
</ul>
<p>W ten spos贸b uatwiamy zadanie, 偶eby GPT nie musia wszystkiego kmini od zera.</p>
<p>By may sukces. Wydaje mi si, 偶e z u偶yciem kt贸rego z tych narzdzi udao mi si sprawi, 偶e po wpisaniu komendy w stylu:</p>
<span><div><pre><code>python porter.py &lt;link do repo&gt;</code></pre></div></span>
<p>Skrypt przeportowa jeden plik, zrobi commit i otworzy pull-requesta.</p>
<h2>Ostateczne rozwiazanie</h2>
<p>Po kilku nieprzespanych nocach, wzlotach i upadkach, uznaem, 偶e problem jest za du偶y na moj gow, albo 偶e narzdzia nie s jeszcze wystarczajco mocne, 偶eby dao si napisa portera. Postanowiem, 偶e wiksz warto bdzie miao dla mnie wykonanie zadania ni偶 tworzenie narzdzia, kt贸re nie wiadomo czy da si stworzy. Dlatego postawiem na stary sprawdzony wzorzec projektowy kopiego-pasta. Czyli plik po pliku kopiowaem do ChatuGPT, nastpnie wklejaem do IDE, odpalaem testy, kompilator i feedowaem spowrotem do ChatuGPT jeli byy bdy.</p>
<h2>Nowe funkcjonalnoci</h2>
<p>Miesic temu do ChatuGPT zosta dodany Code Interpreter. Fajn rzecz jest to, 偶e mo偶na mu wrzuci zip z kodem i on umie sobie po nim chodzi i czyta pliki itp. Uatwio to spraw.</p>
<h2>Podsumowanie</h2>
<p>Bez ChatuGPT nadal nie umiabym TS, a tak偶e bym mia o wiele sabszy codebase. Pena automatyzacja takich zo偶onych zada wydaje si, 偶e jest jeszcze poza zasigiem, ale w tej bran偶y sprawy id tak szybko, 偶e mo偶e ju偶 kto to zrobi :p</p>
<h2>Uznanie autorstwa</h2>
<p>Photo by <a href="https://unsplash.com/@esmonde?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Esmonde Yong</a> on <a href="https://unsplash.com/photos/wFpJV5EWrSM?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></p></section></main></div></div><footer><a href="/">korczak.xyz</a></footer></div></div></div><div id="gatsby-announcer" aria-live="assertive" aria-atomic="true" style="position: absolute; top: 0px; width: 1px; height: 1px; padding: 0px; overflow: hidden; clip: rect(0px, 0px, 0px, 0px); white-space: nowrap; border: 0px;"></div></div><!-- slice-start id="_gatsby-scripts-1" -->
          
        <!-- slice-end id="_gatsby-scripts-1" --></body></html>