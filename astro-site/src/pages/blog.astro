---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import PageContent from '../components/PageContent.astro';
import BlogPageItem from '../components/BlogPageItem.astro';

const posts = await getCollection('blog-en', ({ data }) =>
  data.published
);

// Sort by date descending
posts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<Layout title="Blog | korczak.xyz" lang="en">
  <PageContent title="Blog">
    <ul class="flex flex-col gap-10">
      {posts.map(post => (
        <BlogPageItem
          slug={post.data.slug}
          title={post.data.title}
          date={post.data.date}
          featuredImage={post.data.featuredImage}
          lang="en"
        />
      ))}
    </ul>
  </PageContent>
</Layout>
